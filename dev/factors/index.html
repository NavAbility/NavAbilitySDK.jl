<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Factors · NavAbilitySDK.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://NavAbility.github.io/NavAbilitySDK.jl/factors/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NavAbilitySDK.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../start/">Getting Started</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li class="is-active"><a class="tocitem" href>Factors</a><ul class="internal"><li><a class="tocitem" href="#List-or-Get-Factors"><span>List or Get Factors</span></a></li><li><a class="tocitem" href="#App-Graph-Visualization"><span>App Graph Visualization</span></a></li><li><a class="tocitem" href="#SDK-Supported-Factors"><span>SDK Supported Factors</span></a></li><li><a class="tocitem" href="#Factor-Index"><span>Factor Index</span></a></li></ul></li><li><a class="tocitem" href="../buildgraph/">Build a Graph</a></li><li><a class="tocitem" href="../solvers/">Graph Solvers</a></li><li><a class="tocitem" href="../summary/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Factors</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Factors</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/main/docs/src/factors.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="work_w_factors"><a class="docs-heading-anchor" href="#work_w_factors">Working with Factors</a><a id="work_w_factors-1"></a><a class="docs-heading-anchor-permalink" href="#work_w_factors" title="Permalink"></a></h1><p>Factors represent the interaction between particular variables. Factors define the algebra structure between variables via probabilistic measurement models as captured measurement or data cues.  For example, a distance travelled measurement between two pose variables. Relative factors between variables are probabilistic models that capture the likelihood interactions between variables. Priors factors (i.e. unary to one variable) represent absolute information to be introduced about that variable, for example a GPS measurement; more on how to introduce distrust of such priors later.</p><h2 id="List-or-Get-Factors"><a class="docs-heading-anchor" href="#List-or-Get-Factors">List or Get Factors</a><a id="List-or-Get-Factors-1"></a><a class="docs-heading-anchor-permalink" href="#List-or-Get-Factors" title="Permalink"></a></h2><p>All factors in a graph can be listed via:</p><pre><code class="language-julia hljs">flbls = listFactors(client, context) |&gt; fetch
# [&quot;x0f_8ebc&quot;, ...]

# and for a naturally ordered list
flbls = sort(flbls; lt=NvaSDK.natural_lt)</code></pre><p>Note the factor labels are autogenerated based on the variables and a random sequence.  For example a prior factor might have the label <code>x0f_8ebc</code>, while factor between three variables might be <code>x7x49l4f_654t</code>.</p><p>A specific factor can be retrieved using the label:</p><pre><code class="language-julia hljs">f = getFactor(client, context, flbls[1]) |&gt; fetch
# Dict{String, Any} with 8 entries:
#   &quot;label&quot;                 =&gt; &quot;x0f_8ebc&quot;
#   &quot;_variableOrderSymbols&quot; =&gt; Any[&quot;x0&quot;]
#   &quot;data&quot;                  =&gt; &quot;eyJlbGltaW5hdGVkIjpmYWxzZSwicG90ZW50aWFsdXNlZCI6Z…
#   &quot;tags&quot;                  =&gt; Any[&quot;FACTOR&quot;]
#   &quot;timestamp&quot;             =&gt; &quot;2023-02-11T22:36:49.171Z&quot;
#   &quot;_version&quot;              =&gt; &quot;0.18.6&quot;
#   &quot;fnctype&quot;               =&gt; &quot;PriorPose2&quot;
#   &quot;solvable&quot;              =&gt; 1</code></pre><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.listFactors" href="#NavAbilitySDK.listFactors"><code>NavAbilitySDK.listFactors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">listFactors(navAbilityClient, client)
</code></pre><p>Get a list of the Factors as labels in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/services/Factor.jl#L98-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.getFactor" href="#NavAbilitySDK.getFactor"><code>NavAbilitySDK.getFactor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getFactor(navAbilityClient, client, label)
</code></pre><p>Get a Factor from a graph context using its label.</p><p>Return: Task containing the Factor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/services/Factor.jl#L58-L63">source</a></section></article><h2 id="App-Graph-Visualization"><a class="docs-heading-anchor" href="#App-Graph-Visualization">App Graph Visualization</a><a id="App-Graph-Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#App-Graph-Visualization" title="Permalink"></a></h2><p>The NavAbilityApp can also visualize a specific factor graph session, and a convenient link generator can be used to simplify the session filtering criteria:</p><pre><code class="language-julia hljs">GraphVizApp(context, variableStartsWith=&quot;&quot;)
# https://app.navability.io/cloud/graph/?userId=guest@navability.io&amp;robotStartsWith=SDKjl_0181&amp;sessionStartsWith=Tutorial1_af33&amp;variableStartsWith</code></pre><p>A <code>variableStartsWith=&quot;l&quot;</code> type filter can be used to filter the visualization to more specific elements of the graph.  This is useful in large graphs where the visualization easily overwhelms the display – e.g. just show variables starting with <code>l</code> which may indicate landmarks.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A console output will only produce the text URL as above, but Markdown enhanced output (such as Jupyter or Pluto notebooks) will also produce a clickable graphic.</p></div></div><p>The NavAbilityApp Graph visualization page can also be found in the hamburger menu (top right).  Once on the Graph visualization page, the global filter menu (top left) can be used to look for specific user, robot, session, and starts with criteria.  Here is an example following from earlier (as per one of the ICRA 2022 tutorials) showing a variable <code>x0</code> and the unary prior factor <code>x0f_8ebc</code>:</p><a href="https://app.navability.io/cloud/graph/?userId=guest@navability.io&robotStartsWith=SDKjl_0181&sessionStartsWith=Tutorial1_af33&variableStartsWith">
<p align="center">
<img src="https://user-images.githubusercontent.com/6412556/218284321-83fad03b-ea54-4a0a-976d-49020f48dcd4.png" width="480" border="0" />
</p>
</a><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.GraphVizApp" href="#NavAbilitySDK.GraphVizApp"><code>NavAbilitySDK.GraphVizApp</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct GraphVizApp</code></pre><p>Helper type for linking to App visualization of a factor graph for user:robot:session.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Common.jl#L11-L15">source</a></section></article><h2 id="SDK-Supported-Factors"><a class="docs-heading-anchor" href="#SDK-Supported-Factors">SDK Supported Factors</a><a id="SDK-Supported-Factors-1"></a><a class="docs-heading-anchor-permalink" href="#SDK-Supported-Factors" title="Permalink"></a></h2><p>The list of currently supported factors in the SDK are:</p><ul><li><code>Prior</code>, for 1D Euclidean only.</li><li><code>LinearRelative</code>, for Euclidean only.</li><li><code>Point2Point2Range</code></li><li><code>PriorPoint2</code></li><li><code>PriorPose2</code></li><li><code>Pose2Pose2</code></li><li><code>ScatterAlignPose2</code></li><li><code>Pose2AprilTag4Corners</code></li><li><code>Pose2Point2BearingRange</code></li><li><code>PriorPose3</code></li><li><code>Pose3Pose3</code></li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Many more factor types are already supported by the solver, see <a href="https://juliarobotics.org/Caesar.jl/latest/concepts/available_varfacs/">additional docs here</a>.  Reach out to NavAbility for help or support in bringing more variable types to eh SDK sooner, or for help in building more factor types that may not yet exist in either libraries.</p></div></div><h2 id="Factor-Index"><a class="docs-heading-anchor" href="#Factor-Index">Factor Index</a><a id="Factor-Index-1"></a><a class="docs-heading-anchor-permalink" href="#Factor-Index" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.ZInferenceType" href="#NavAbilitySDK.ZInferenceType"><code>NavAbilitySDK.ZInferenceType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ZInferenceType &lt;: NavAbilitySDK.InferenceType</code></pre><p>ZInferenceType is used by many factors as a common inference type that uses a single distribution to express a constraint between variables. Used by: Prior, LinearRelative, PriorPose2, PriorPoint2, Pose2Pose2, Point2Point2Range, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/InferenceTypes.jl#L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.InferenceType" href="#NavAbilitySDK.InferenceType"><code>NavAbilitySDK.InferenceType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type InferenceType</code></pre><p>Abstract parent type for all InferenceTypes, which are the functions inside of factors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/InferenceTypes.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.PriorData" href="#NavAbilitySDK.PriorData"><code>NavAbilitySDK.PriorData</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">PriorData(; Z, kwargs...)
</code></pre><p>Create a prior factor for a ContinuousScalar (a.k.a. Pose1) with a distribution Z representing 1D prior information,      e.g. <code>Normal(0.0, 0.1)</code>.</p><p>Default value of Z = <code>Normal(0.0, 0.1)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.LinearRelativeData" href="#NavAbilitySDK.LinearRelativeData"><code>NavAbilitySDK.LinearRelativeData</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LinearRelativeData(; Z, kwargs...)
</code></pre><p>Create a ContinousScalar-&gt;ContinousScalar (also known as Pose1-&gt;Pose1) factor with a distribution Z representing the 1D relationship between the variables, e.g. <code>Normal(1.0, 0.1)</code>.</p><p>Default value of Z = <code>Normal(1.0, 0.1)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.PriorPoint2Data" href="#NavAbilitySDK.PriorPoint2Data"><code>NavAbilitySDK.PriorPoint2Data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">PriorPoint2Data(; Z, kwargs...)
</code></pre><p>Create a prior factor for a Point2 with a distribution Z representing (x,y) prior information,      e.g. <code>FullNormal([0.0, 0.0.0], diagm([0.01, 0.01]))</code>.</p><p>Default value of Z = <code>FullNormal([0.0, 0.0], diagm([0.01, 0.01]))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.Point2Point2RangeData" href="#NavAbilitySDK.Point2Point2RangeData"><code>NavAbilitySDK.Point2Point2RangeData</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Point2Point2RangeData(; range, kwargs...)
</code></pre><p>Create a Point2-&gt;Point2 range factor with a 1D distribution:</p><ul><li>range: The range from the pose to the point, default <code>Normal(1, 1)</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L145">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.PriorPose2Data" href="#NavAbilitySDK.PriorPose2Data"><code>NavAbilitySDK.PriorPose2Data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">PriorPose2Data(; Z, kwargs...)
</code></pre><p>Create a prior factor for a Pose2 with a distribution Z representing (x,y,theta) prior information,      e.g. <code>FullNormal([0.0, 0.0, 0.0], diagm([0.01, 0.01, 0.01]))</code>.</p><p>Default value of Z = <code>FullNormal([0.0, 0.0, 0.0], diagm([0.01, 0.01, 0.01]))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.Pose2Pose2Data" href="#NavAbilitySDK.Pose2Pose2Data"><code>NavAbilitySDK.Pose2Pose2Data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Pose2Pose2Data(; Z, kwargs...)
</code></pre><p>Create a Pose2-&gt;Pose2 factor with a distribution Z representing the (x,y,theta) relationship between the variables, e.g. <code>FullNormal([1,0,0.3333*π], diagm([0.01,0.01,0.01]))</code>.</p><p>Default value of Z = <code>FullNormal([1,0,0.3333*π], diagm([0.01,0.01,0.01]))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.Pose2Point2BearingRangeData" href="#NavAbilitySDK.Pose2Point2BearingRangeData"><code>NavAbilitySDK.Pose2Point2BearingRangeData</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Pose2Point2BearingRangeData(; bearing, range, kwargs...)
</code></pre><p>Create a Pose2-&gt;Point2 bearing+range factor with 1D distributions:</p><ul><li>bearing: The bearing from the pose to the point, default <code>Normal(0, 1)</code>.</li><li>range: The range from the pose to the point, default <code>Normal(1, 1)</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L134">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.PriorPose3Data" href="#NavAbilitySDK.PriorPose3Data"><code>NavAbilitySDK.PriorPose3Data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">PriorPose3Data(; Z, kwargs...)
</code></pre><p>Create a prior factor for a Pose3 with a distribution Z representing (x,y,z,i,j,k) prior information,      e.g. <code>FullNormal(zeros(6), diagm(0.01*ones(6)))</code>.</p><p>Default value of Z = <code>FullNormal(zeros(6), diagm(0.01*ones(6)))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L61">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.Pose3Pose3Data" href="#NavAbilitySDK.Pose3Pose3Data"><code>NavAbilitySDK.Pose3Pose3Data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Pose3Pose3Data(; Z, kwargs...)
</code></pre><p>Create a Pose3-&gt;Pose3 factor with a distribution Z representing the (x,y,theta) relationship between the variables, e.g. <code>FullNormal([1;zeros(5)], diagm(0.01*ones(6)))</code>.</p><p>Default value of Z = <code>FullNormal(zeros(6), diagm(0.01*ones(6)))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/Factor.jl#L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.ScatterAlignPose2" href="#NavAbilitySDK.ScatterAlignPose2"><code>NavAbilitySDK.ScatterAlignPose2</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Alignment factor between point cloud populations, using either</p><ul><li>a continuous density function cost: <code>ApproxManifoldProducts.mmd</code>, or</li><li>a conventional iterative closest point (ICP) algorithm (when <code>.sample_count &lt; 0</code>).</li></ul><p>This factor can support very large density clouds, with <code>sample_count</code> subsampling for individual alignments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/InferenceTypes.jl#L80-L88">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NavAbilitySDK.Pose2AprilTag4Corners" href="#NavAbilitySDK.Pose2AprilTag4Corners"><code>NavAbilitySDK.Pose2AprilTag4Corners</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct Pose2AprilTag4Corners &lt;: NavAbilitySDK.InferenceType</code></pre><p>InferenceType for Pose2AprilTag4CornersData.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NavAbility/NavAbilitySDK.jl/blob/837e561f3a87670565ee62c57f55f00b5b7f6d57/src/navability/entities/InferenceTypes.jl#L65">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../variables/">« Variables</a><a class="docs-footer-nextpage" href="../buildgraph/">Build a Graph »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 13 February 2023 00:19">Monday 13 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
